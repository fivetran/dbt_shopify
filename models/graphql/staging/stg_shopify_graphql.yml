version: 2

models:
  - name: stg_shopify_gql__customer
    description: Each record represents a customer in Shopify.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `customer_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: customer_id
        description: A unique identifier for the customer.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: marketing_consent_state
        description: >
          Field indicating if the customer has consented to receive marketing material via email. Coalescing of the new `email_marketing_consent_state`
          field and the deprecated `accepts_marketing` field. Records with the old field will be marked with '(legacy)'.
      - name: marketing_opt_in_level
        description: The marketing subscription opt-in level, as described in the M3AAWG Sender Best Common Practices, that the customer gave when they consented to receive marketing material by email.
      - name: marketing_consent_updated_at
        description: The date and time when the customer consented to receive marketing material by email. If no date is provided, then the date and time when the consent information was sent is used.
      - name: created_timestamp
        description: The date and time when the customer was created.
      - name: email
        description: The unique email address of the customer. Attempting to assign the same email address to multiple customers returns an error.
      - name: first_name
        description: The customer's first name.
      - name: last_name
        description: The customer's last name.
      - name: orders_count
        description: The number of orders associated with this customer.
      - name: phone
        description: The unique phone number (E.164 format) for this customer. Attempting to assign the same phone number to multiple customers returns an error.
      - name: account_state
        description: The state of the customer's account with a shop.
      - name: is_tax_exempt
        description: Whether the customer is exempt from paying taxes on their order. If true, then taxes won't be applied to an order at checkout. If false, then taxes will be applied at checkout.
      - name: total_spent
        description: The total amount of money that the customer has spent across their order history.
      - name: updated_timestamp
        description: The date and time when the customer information was last updated.
      - name: is_verified_email
        description: Whether the customer has verified their email address.
      - name: currency 
        description: The three-letter code (ISO 4217 format) for the currency that the customer used when they paid for their last order. Defaults to the shop currency. Returns the shop currency for test orders.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: note
        description: A note about the customer.

  - name: stg_shopify_gql__order
    description: Each record represents an order in Shopify.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: order_id
        description: A globally-unique ID.
      - name: app_id
        description: The ID of the app that created the order.
      - name: billing_address_address_1
        description: The street address of the billing address.
      - name: billing_address_address_2
        description: An optional additional field for the street address of the billing address.
      - name: billing_address_city
        description: The city, town, or village of the billing address.
      - name: billing_address_company
        description: The company of the person associated with the billing address.
      - name: billing_address_country
        description: The name of the country of the billing address.
      - name: billing_address_country_code
        description: The two-letter code (ISO 3166-1 format) for the country of the billing address.
      - name: billing_address_first_name
        description: The first name of the person associated with the payment method.
      - name: billing_address_last_name
        description: The last name of the person associated with the payment method.
      - name: billing_address_latitude
        description: The latitude of the billing address.
      - name: billing_address_longitude
        description: The longitude of the billing address.
      - name: billing_address_name
        description: The full name of the person associated with the payment method.
      - name: billing_address_phone
        description: The phone number at the billing address.
      - name: billing_address_province
        description: The name of the region (province, state, prefecture, …) of the billing address.
      - name: billing_address_province_code
        description: The two-letter abbreviation of the region of the billing address.
      - name: billing_address_zip
        description: The postal code (zip, postcode, Eircode, …) of the billing address.
      - name: browser_ip
        description: The IP address of the customer who placed the order. Useful for fraud detection and geographic analysis.
      - name: buyer_accepts_marketing
        description: Whether the customer agreed to receive marketing emails at the time of purchase.
      - name: cancel_reason
        description: The reason why the order was canceled.
      - name: cancelled_timestamp
        description: The date and time when the order was canceled.
      - name: closed_timestamp
        description: The date and time when the order was closed (archived).
      - name: created_timestamp
        description: The autogenerated date and time when the order was created in Shopify.
      - name: currency
        description: The shop currency when the order was placed. For example, "USD" or "CAD".
      - name: customer_id
        description: The ID of the order's customer.
      - name: email
        description: The customer's email address.
      - name: financial_status
        description: An order's financial status for display in the Shopify admin. See possible values [here](https://shopify.dev/docs/api/admin-graphql/latest/objects/order#field-Order.fields.displayFinancialStatus).
      - name: fulfillment_status
        description: The order's fulfillment status that displays in the Shopify admin to merchants. For example, an order might be unfulfilled or scheduled. See possible values [here](https://shopify.dev/docs/api/admin-graphql/latest/objects/order#field-Order.fields.displayFulfillmentStatus).
      - name: location_id
        description: The ID of the physical location where the order was processed.
      - name: name
        description: The unique identifier for the order that appears on the order page in the Shopify admin and the Order status page. For example, "#1001", "EN1001", or "1001-A". This value isn't unique across multiple stores.
      - name: note
        description: The optional note associated with the order. Contains additional information or instructions added by merchants or customers during the order process. Commonly used for special delivery instructions, gift messages, or internal processing notes.
      - name: number
        description: The order number used to generate the name using the store's configured order number prefix/suffix. This number isn't guaranteed to follow a consecutive integer sequence (e.g. 1, 2, 3..), nor is it guaranteed to be unique across multiple stores, or even for a single store.
      - name: processed_timestamp
        description: The date and time when an order was processed. This value is the date that appears on your orders and that's used in the analytic reports.
      - name: shipping_address_address_1
        description: The street address of the shipping address.
      - name: shipping_address_address_2
        description: An optional additional field for the street address of the shipping address.
      - name: shipping_address_city
        description: The city, town, or village of the shipping address.
      - name: shipping_address_company
        description: The company of the person associated with the shipping address.
      - name: shipping_address_country
        description: The name of the country of the shipping address.
      - name: shipping_address_country_code
        description: The two-letter code (ISO 3166-1 format) for the country of the shipping address.
      - name: shipping_address_first_name
        description: The first name of the person associated with the shipping address.
      - name: shipping_address_last_name
        description: The last name of the person associated with the shipping address.
      - name: shipping_address_latitude
        description: The latitude of the shipping address.
      - name: shipping_address_longitude
        description: The longitude of the shipping address.
      - name: shipping_address_name
        description: The full name of the person associated with the payment method.
      - name: shipping_address_phone
        description: The phone number at the shipping address.
      - name: shipping_address_province
        description: The name of the region (province, state, prefecture, …) of the shipping address.
      - name: shipping_address_province_code
        description: The two-letter abbreviation of the region of the shipping address.
      - name: shipping_address_zip
        description: The postal code (zip, postcode, Eircode, …) of the shipping address.
      - name: source_name
        description: The name of the source associated with the order, such as "web", "mobile_app", or "pos". Use this field to identify the platform where the order was placed.
      - name: subtotal_price_shop_amount
        description: The sum of the prices for all line items after discounts and before returns, in *shop* currency. If taxesIncluded is true, then the subtotal also includes tax.
      - name: subtotal_price_pres_amount
        description: The sum of the prices for all line items after discounts and before returns, in shop presentment currency. If taxesIncluded is true, then the subtotal also includes tax.
      - name: subtotal_price_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the subtotal price.
      - name: subtotal_price_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the presentment currency used to display the subtotal price.
      - name: has_taxes_included
        description: Whether taxes are included in the order subtotal.
      - name: is_test_order
        description: Whether this is a test order.
      - name: total_discounts_shop_amount
        description: The total amount discounted on the order before returns, in *shop* currency. This includes both order and line level discounts.
      - name: total_discounts_pres_amount
        description: The total amount discounted on the order before returns, in *presentment* currency. This includes both order and line level discounts.
      - name: total_discounts_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the total discounts.
      - name: total_discounts_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the currency currency used to display the total discounts.
      - name: total_price_shop_amount
        description: The total price of the order, before returns, in *shop* currency.
      - name: total_price_pres_amount
        description: The total price of the order, before returns, in *presentment* currency.
      - name: total_price_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the total price.
      - name: total_price_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the presentment currency used to display the total price.
      - name: total_tax_shop_amount
        description: The total tax amount of the order, before returns, in *shop* currency.
      - name: total_tax_pres_amount
        description: The total tax amount of the order, before returns, in *presentment* currency.
      - name: total_tax_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the total tax amount.
      - name: total_tax_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the presentment currency used to display the total tax amount.
      - name: total_weight
        description: The sum of all line item weights before returns, in grams.
      - name: updated_timestamp
        description: The date and time (ISO 8601 format) when the order was last modified.
      - name: user_id
        description: >
          The staff member who created or is responsible for the order. Useful for tracking which team member handled phone orders, manual orders, or order modifications. 
          Returns null for orders created directly by customers through the online store.
      - name: is_confirmed
        description: Whether inventory has been reserved for the order.
      - name: customer_locale 
        description: A two-letter or three-letter language code, optionally followed by a region modifier.
      - name: order_status_url
        description: The URL where customers can check their order's current status, including tracking information and delivery updates. Provides order tracking links in emails, apps, or customer communications.
      - name: is_deleted
        description: "{{ doc('_fivetran_deleted') }}"
      - name: total_tip_received_shop_amount
        description: The sum of all tip amounts for the order, in *shop* currency.
      - name: total_tip_received_pres_amount
        description: The sum of all tip amounts for the order, in *presentment* currency.
      - name: total_tip_received_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the total tips received.
      - name: total_tip_received_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the presentment currency used to display the total tips received.
      - name: presentment_currency
        description: The presentment currency that was used to display prices to the customer.
      - name: shipping_cost_shop_amount
        description: The total shipping costs returned to the customer, in *shop* currency.
      - name: shipping_cost_pres_amount
        description: The total shipping costs returned to the customer, in *presentment* currency.
      - name: shipping_cost_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the total shipping costs.
      - name: shipping_cost_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the presentment currency used to display the total shipping costs.
      - name: is_confirmed
        description: Whether the order is confirmed.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: has_buyer_accepted_marketing
        description: Whether the customer agreed to receive marketing emails at the time of purchase.

  - name: stg_shopify_gql__order_line
    description: Each record represents a line item from an order in Shopify.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_line_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: order_line_id
        description: The ID of the line item.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: fulfillment_status
        description: How far along an order is in terms line items fulfilled.
      - name: is_gift_card
        description: Whether the item is a gift card. If true, then the item is not taxed or considered for shipping charges.
      - name: name
        description: The name of the product variant.
      - name: order_id
        description: The ID of the related order.
      - name: price_pres_amount
        description: The total price of the line item when the order was created, in *presentment* currency. This value doesn't include discounts.
      - name: price_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the presentment currency used to display the total price.
      - name: price_shop_amount
        description: The total price of the line item when the order was created, in *shop* currency. This value doesn't include discounts.
      - name: price_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the total price.
      - name: product_id
        description: The ID of the product that the line item belongs to. Can be null if the original product associated with the order is deleted at a later date.
      - name: quantity
        description: The number of items that were purchased.
      - name: is_shipping_required
        description: Whether the item requires shipping.
      - name: sku
        description: The item's SKU (stock keeping unit).
      - name: is_taxable
        description: Whether the item was taxable.
      - name: title
        description: The title of the product.
      - name: total_discount_shop_amount
        description: The total discount allocated to the line item in *shop* currency, including the total allocated to refunded and removed quantities. This value doesn't include order-level discounts.
      - name: total_discount_pres_amount
        description: The total discount allocated to the line item in *presentment* currency, including the total allocated to refunded and removed quantities. This value doesn't include order-level discounts.
      - name: total_discount_shop_currency_code
        description: The three-letter code (ISO å4217 format) for the shop currency used to display the total discount.
      - name: total_discount_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the currency currency used to display the total discount.
      - name: variant_id
        description: The ID of the product variant.
      - name: vendor
        description: The name of the item's supplier.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: index
        description: Index of the order line.
      - name: variant_title
        description: The title of the product variant. 

  - name: stg_shopify_gql__abandoned_checkout
    description: A checkout is considered abandoned after the customer has added contact information, but before the customer has completed their purchase.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `checkout_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: is_deleted
        description: "{{ doc('_fivetran_deleted') }}"
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: abandoned_checkout_url
        description: The recovery URL that's sent to a customer so they can recover their checkout.
      - name: billing_address_address_1
        description: The street address of the billing address.
      - name: billing_address_address_2
        description: An optional additional field for the street address of the billing address.
      - name: billing_address_city
        description: The city of the billing address.
      - name: billing_address_company
        description: The company of the person associated with the billing address.
      - name: billing_address_country
        description: The name of the country of the billing address.
      - name: billing_address_country_code
        description: The two-letter code (ISO 3166-1 alpha-2 format) for the country of the billing address.
      - name: billing_address_first_name
        description: The first name of the person associated with the payment method.
      - name: billing_address_last_name
        description: The last name of the person associated with the payment method.
      - name: billing_address_latitude
        description: The latitude of the billing address.
      - name: billing_address_longitude
        description: The longitude of the billing address.
      - name: billing_address_name
        description: The full name of the person associated with the payment method.
      - name: billing_address_phone
        description: The phone number at the billing address.
      - name: billing_address_province
        description: The name of the state or province of the billing address.
      - name: billing_address_province_code
        description: The two-letter abbreviation of the state or province of the billing address.
      - name: billing_address_zip
        description: The zip or postal code of the billing address.
      - name: created_at
        description: The date and time (ISO 8601 format) when the checkout was created.
      - name: customer_id
        description: ID of the customer with the abandoned checkout.
      - name: checkout_id
        description: The ID for the checkout.
        tests:
          - not_null
      - name: name
        description: Checkout order number. 
      - name: note
        description: The text of an optional note that a shop owner can attach to the order.
      - name: shipping_address_address_1
        description: The street address of the shipping address.
      - name: shipping_address_address_2
        description: An optional additional field for the street address of the shipping address.
      - name: shipping_address_city
        description: The city of the shipping address.
      - name: shipping_address_company
        description: The company of the person associated with the shipping address.
      - name: shipping_address_country
        description: The name of the country of the shipping address.
      - name: shipping_address_country_code
        description: The two-letter code (ISO 3166-1 alpha-2 format) for the country of the shipping address.
      - name: shipping_address_first_name
        description: The first name of the person associated with the shipping address.
      - name: shipping_address_last_name
        description: The last name of the person associated with the shipping address.
      - name: shipping_address_latitude
        description: The latitude of the shipping address.
      - name: shipping_address_longitude
        description: The longitude of the shipping address.
      - name: shipping_address_name
        description: The full name of the person associated with the shipping address.
      - name: shipping_address_phone
        description: The phone number at the shipping address.
      - name: shipping_address_province
        description: The name of the state or province of the shipping address.
      - name: shipping_address_province_code
        description: The two-letter abbreviation of the state or province of the shipping address.
      - name: shipping_address_zip
        description: The zip or postal code of the shipping address.
      - name: has_taxes_included
        description: Boolean representing whether taxes are included in the price.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the checkout was last modified.
      - name: total_discount_shop_amount
        description: The total discount allocated to the line item in *shop* currency, including the total allocated to refunded and removed quantities. This value doesn't include order-level discounts.
      - name: total_discount_pres_amount
        description: The total discount allocated to the line item in *presentment* currency, including the total allocated to refunded and removed quantities. This value doesn't include order-level discounts.
      - name: total_discount_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the total discount.
      - name: total_discount_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the currency currency used to display the total discount.
      - name: total_duties_shop_amount
        description: The total duties of the checkout in *shop* currency, including the total allocated to refunded and removed quantities. This value doesn't include order-level discounts.
      - name: total_duties_pres_amount
        description: The total duties of the checkout in *presentment* currency, including the total allocated to refunded and removed quantities. This value doesn't include order-level discounts.
      - name: total_duties_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the total duties of the checkout.
      - name: total_duties_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the currency currency used to display the total duties of the checkout.
      - name: total_line_items_price_shop_amount
        description: The sum of the prices of all line items in the checkout in *shop* currency, including the total allocated to refunded and removed quantities. This value doesn't include order-level discounts.
      - name: total_line_items_price_pres_amount
        description: The sum of the prices of all line items in the checkout in *presentment* currency, including the total allocated to refunded and removed quantities. This value doesn't include order-level discounts.
      - name: total_line_items_price_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the sum of the prices of all line items in the checkout.
      - name: total_line_items_price_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the presentment currency used to display the sum of the prices of all line items in the checkout.
      - name: total_price_shop_amount
        description: The sum of line item prices, all discounts, shipping costs, and taxes for the checkout in *shop* currency.
      - name: total_price_pres_amount
        description: The sum of line item prices, all discounts, shipping costs, and taxes for the checkout in *presentment* currency.
      - name: total_price_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the sum of line item prices, all discounts, shipping costs, and taxes for the checkout.
      - name: total_price_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the presentment currency used to display the sum of line item prices, all discounts, shipping costs, and taxes for the checkout.
      - name: total_tax_shop_amount
        description: The sum of all the taxes applied to the checkout in *shop* currency.
      - name: total_tax_pres_amount
        description: The sum of all the taxes applied to the checkout in *presentment* currency.
      - name: total_tax_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the total tax amount.
      - name: total_tax_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the presentment currency used to display the total tax amount.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: completed_at
        description: The date and time when the buyer completed the checkout. Null if the checkout has not been completed.
      - name: subtotal_price_shop_amount
        description: The price of the checkout before shipping and taxes in *shop* currency. If taxesIncluded is true, then the subtotal also includes tax.
      - name: subtotal_price_pres_amount
        description: The price of the checkout before shipping and taxes in *presentment* currencyy. If taxesIncluded is true, then the subtotal also includes tax.
      - name: subtotal_price_shop_currency_code
        description: The three-letter code (ISO 4217 format) for the shop currency used to display the subtotal price.
      - name: subtotal_price_pres_currency_code
        description: The three-letter code (ISO 4217 format) for the presentment currency used to display the subtotal price.

  - name: stg_shopify_gql__abandoned_checkout_discount_code
    description: Abandoned checkouts that applied a discount code. 
    columns:
      - name: unique_key
        description: Surrogate key hashed on `checkout_id`, `code`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: checkout_id
        description: ID of the checkout. 
        tests:
          - not_null
      - name: code
        description: The discount code.
      - name: index
        description: Index of the discount codes from abandoned checkouts.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__collection
    description: >
      A collection is a grouping of products that merchants can create to make their stores easier to browse.
      Merchants can create collections by selecting products individually or by defining rules that automatically determine whether products are included (aka a "smart collection"). 
    columns:
      - name: unique_key
        description: Surrogate key hashed on `collection_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: collection_id
        description: The ID for the collection.
        tests:
          - not_null
      - name: is_deleted
        description: "{{ doc('_fivetran_deleted') }}"
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: rule_logic
        description: Whether the `rules` are disjunctive (logical `OR`) or conjunctive (logical `AND`)
      - name: handle
        description: A unique, human-readable string for the collection automatically generated from its title. This is used in themes by the Liquid templating language to refer to the collection.
      - name: sort_order
        description: >
          The order of the products in the collection. Valid values incline
          - `alpha-asc`: The products are sorted alphabetically from A to Z.
          - `alpha-des`: The products are sorted alphabetically from Z to A.
          - `best-selling`: The products are sorted by number of sales.
          - `created`: The products are sorted by the date they were created, from oldest to newest.
          - `created-desc`: The products are sorted by the date they were created, from newest to oldest.
          - `manual`: The products are manually sorted by the shop owner.
          - `price-asc`: The products are sorted by price from lowest to highest.
          - `price-desc`: The products are sorted by price from highest to lowest.
      - name: title
        description: The name of the collection.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the collection was last modified.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__collection_product
    description: Table relating products to the collections they belong to. Use this instead of the deprecated `COLLECT` table.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `collection_id`, `product_id`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: collection_id
        description: ID referencing the `collection` the product belongs to.
        tests:
          - not_null
      - name: product_id
        description: ID referencing the `product`.
        tests:
          - not_null
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__customer_tag
    description: Tags that the shop owner has attached to the customer. A customer can have up to 250 tags.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `customer_id`, `index`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: index
        description: Index (starting from 1) representing when the tag was placed on the customer. 
        tests:
          - not_null
      - name: customer_id
        description: ID of the customer being tagged.
        tests:
          - not_null
      - name: value
        description: Value of the tag.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__discount_allocation
    description: Table storing allocation amounts from discount applications across specific order lines.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_line_id`, `discount_application_index`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: allocated_pres_amount
        description: The presentment money amount of the discount allocation in the customer’s local currency.
      - name: allocated_pres_currency_code
        description: The presentment money currency code for the customer’s local currency.
      - name: allocated_shop_amount
        description: The shop money amount of the discount allocation in the store’s currency.
      - name: allocated_shop_currency_code
        description: The shop money currency code for the store’s currency
      - name: discount_application_index
        description: Index of the discount application this allocation relates to. Used to join with the discount application.
        tests:
          - not_null
      - name: index
        description: The index of the discount allocation within the list of allocations on an order line.
      - name: order_line_id
        description: The ID of the order line item receiving the allocation.
        tests:
          - not_null
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__discount_application
    description: Table storing discount applications, which define how discounts were applied at the order level.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_id`, `index`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: allocation_method
        description: >
          The method by which the discount is allocated. Valid values include `each` (applies the discount to each eligible item) and `across` (spreads the discount value across eligible items).
      - name: index
        description: The index of the discount application on the order.
        tests:
          - not_null
      - name: order_id
        description: The ID of the order to which the discount was applied.
        tests:
          - not_null
      - name: target_selection
        description: >
          Indicates whether the discount applies to all line items (`all`) or only those that are specifically entitled (`entitled`).
      - name: target_type
        description: The type of target this discount applies to (e.g., `line_item` or `shipping_line`).
      - name: value_amount
        description: The numerical value of the discount application. A monetary value in decimal format, allowing for precise representation of cents or fractional currency.
      - name: value_currency_code
        description: The three-letter currency code for the discount that represents a world currency used in a store.
      - name: value_percentage
        description: >
          The percentage discount value that is applied to a line, a number ranging between -100 (free) and 0 (no discount)
      - name: value_type
        description: >
          Indicates whether the discount value is a `percentage` or `fixed_amount`.
          If `target_type` is `shipping_line`, only `percentage` is accepted.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: code
        description: The discount code applied, if applicable.

  - name: stg_shopify_gql__discount_code_app
    description: Table storing metadata for discount codes created through third-party apps in Shopify.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `discount_code_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: discount_code_id
        description: The unique ID for the discount code.
        tests:
          - not_null
      - name: title
        description: The display name for the discount code.
      - name: status
        description: The status of the discount code (e.g., `enabled`, `disabled`, `expired`).
      - name: applies_once_per_customer
        description: Boolean representing whether the discount code is limited to one use per customer.
      - name: usage_limit
        description: The total number of times the discount code can be used.
      - name: usage_count
        description: The number of times the discount code has been used.
      - name: codes_count
        description: The total number of redeemable codes generated for this discount.
      - name: codes_precision
        description: Indicates the precision or type of generated codes (e.g., exact vs. bulk).
      - name: combines_with_order_discounts
        description: Whether this discount can be combined with other order-level discounts.
      - name: combines_with_product_discounts
        description: Whether this discount can be combined with product-level discounts.
      - name: combines_with_shipping_discounts
        description: Whether this discount can be combined with shipping discounts.
      - name: customer_selection_all_customers
        description: Boolean indicating whether the discount is available to all customers.
      - name: recurring_cycle_limit
        description: The number of billing cycles this discount applies to (for subscription products).
      - name: total_sales_amount
        description: The total sales amount that resulted from the usage of this discount.
      - name: total_sales_currency_code
        description: The currency code associated with `total_sales_amount`.
      - name: created_at
        description: The date and time (ISO 8601 format) when the discount code was created.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the discount code was last updated.
      - name: starts_at
        description: The date and time (ISO 8601 format) when the discount code becomes active.
      - name: ends_at
        description: The date and time (ISO 8601 format) when the discount code expires.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__discount_code_basic
    description: Table storing metadata about basic discount codes created by merchants.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `discount_code_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: discount_code_id
        description: The unique ID for the discount code.
        tests:
          - not_null
      - name: title
        description: The display name for the discount code.
      - name: status
        description: The status of the discount code (e.g., `enabled`, `disabled`, `expired`).
      - name: applies_once_per_customer
        description: Boolean representing whether the discount code is limited to one use per customer.
      - name: usage_limit
        description: The total number of times the discount code can be used.
      - name: usage_count
        description: The number of times the discount code has been used.
      - name: codes_count
        description: The total number of redeemable codes generated for this discount.
      - name: codes_precision
        description: Indicates the precision or type of generated codes (e.g., exact vs. bulk).
      - name: combines_with_order_discounts
        description: Whether this discount can be combined with other order-level discounts.
      - name: combines_with_product_discounts
        description: Whether this discount can be combined with product-level discounts.
      - name: combines_with_shipping_discounts
        description: Whether this discount can be combined with shipping discounts.
      - name: customer_selection_all_customers
        description: Boolean indicating whether the discount is available to all customers.
      - name: recurring_cycle_limit
        description: The number of billing cycles this discount applies to (for subscription products).
      - name: total_sales_amount
        description: The total sales amount that resulted from the usage of this discount.
      - name: total_sales_currency_code
        description: The currency code associated with `total_sales_amount`.
      - name: created_at
        description: The date and time (ISO 8601 format) when the discount code was created.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the discount code was last updated.
      - name: starts_at
        description: The date and time (ISO 8601 format) when the discount code becomes active.
      - name: ends_at
        description: The date and time (ISO 8601 format) when the discount code expires.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__discount_code_bxgy
    description: Table storing metadata for Buy X Get Y-style discount codes in Shopify, where discounts are applied based on product quantity thresholds.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `discount_code_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: discount_code_id
        description: The unique ID for the discount code.
        tests:
          - not_null
      - name: title
        description: The display name for the discount code.
      - name: status
        description: The status of the discount code (e.g., `enabled`, `disabled`, `expired`).
      - name: applies_once_per_customer
        description: Boolean representing whether the discount code is limited to one use per customer.
      - name: usage_limit
        description: The total number of times the discount code can be used.
      - name: usage_count
        description: The number of times the discount code has been used.
      - name: codes_count
        description: The total number of redeemable codes generated for this discount.
      - name: codes_precision
        description: Indicates the precision or type of generated codes (e.g., exact vs. bulk).
      - name: combines_with_order_discounts
        description: Whether this discount can be combined with other order-level discounts.
      - name: combines_with_product_discounts
        description: Whether this discount can be combined with product-level discounts.
      - name: combines_with_shipping_discounts
        description: Whether this discount can be combined with shipping discounts.
      - name: customer_selection_all_customers
        description: Boolean indicating whether the discount is available to all customers.
      - name: total_sales_amount
        description: The total sales amount that resulted from the usage of this discount.
      - name: total_sales_currency_code
        description: The currency code associated with `total_sales_amount`.
      - name: created_at
        description: The date and time (ISO 8601 format) when the discount code was created.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the discount code was last updated.
      - name: starts_at
        description: The date and time (ISO 8601 format) when the discount code becomes active.
      - name: ends_at
        description: The date and time (ISO 8601 format) when the discount code expires.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__discount_code_free_shipping
    description: Table storing metadata for free shipping discount codes in Shopify, where shipping costs are discounted based on qualifying conditions.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `discount_code_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: discount_code_id
        description: The unique ID for the discount code.
        tests:
          - not_null
      - name: title
        description: The display name for the discount code.
      - name: status
        description: The status of the discount code (e.g., `enabled`, `disabled`, `expired`).
      - name: applies_once_per_customer
        description: Boolean representing whether the discount code is limited to one use per customer.
      - name: usage_limit
        description: The total number of times the discount code can be used.
      - name: usage_count
        description: The number of times the discount code has been used.
      - name: codes_count
        description: The total number of redeemable codes generated for this discount.
      - name: codes_precision
        description: Indicates the precision or type of generated codes (e.g., exact vs. bulk).
      - name: combines_with_order_discounts
        description: Whether this discount can be combined with other order-level discounts.
      - name: combines_with_product_discounts
        description: Whether this discount can be combined with product-level discounts.
      - name: combines_with_shipping_discounts
        description: Whether this discount can be combined with shipping discounts.
      - name: customer_selection_all_customers
        description: Boolean indicating whether the discount is available to all customers.
      - name: recurring_cycle_limit
        description: The number of billing cycles this discount applies to (for subscription products).
      - name: total_sales_amount
        description: The total sales amount that resulted from the usage of this discount.
      - name: total_sales_currency_code
        description: The currency code associated with `total_sales_amount`.
      - name: created_at
        description: The date and time (ISO 8601 format) when the discount code was created.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the discount code was last updated.
      - name: starts_at
        description: The date and time (ISO 8601 format) when the discount code becomes active.
      - name: ends_at
        description: The date and time (ISO 8601 format) when the discount code expires.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__discount_redeem_code
    description: Table storing individual redeem codes that customers can use at checkout to receive a discount. Each redeem code is tied to a parent discount and may be created by an app or manually.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `discount_code_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: discount_code_id
        description: The unique ID of the redeem code.
        tests:
          - not_null
      - name: async_usage_count
        description: The number of times that the redeem code has been used. This is updated asynchronously and may differ from real-time usage.
      - name: code
        description: The redeemable code that a customer can enter at checkout (e.g., `SUMMER20`).
      - name: created_by_description
        description: A descriptive label of the app or user who created the redeem code.
      - name: created_by_id
        description: The internal ID of the app or user that created the redeem code.
      - name: created_by_title
        description: The name or title of the creator of the redeem code (typically an app name).
      - name: discount_id
        description: The unique ID of the parent discount associated with this redeem code.
      - name: discount_type
        description: The type of discount the redeem code is associated with (e.g., `discount_code_basic`, `discount_code_app`).
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__fulfillment
    description: >
      A fulfillment order represents a group of one or more items in an order that will be fulfilled from the same location. 
      A fulfillment represents work that is completed as part of a fulfillment order and can include one or more items.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `fulfillment_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: created_at
        description: The date and time when the fulfillment was created. The API returns this value in ISO 8601 format.
      - name: fulfillment_id
        description: The ID for the fulfillment.
        tests:
          - not_null
      - name: location_id
        description: The unique identifier of the location that the fulfillment was processed at.
      - name: name
        description: >
          The uniquely identifying fulfillment name, consisting of two parts separated by a .. The first part represents the order name and the second part represents the fulfillment number. 
          The fulfillment number automatically increments depending on how many fulfillments are in an order (e.g. #1001.1, #1001.2).
      - name: order_id
        description: The unique numeric identifier for the order.
      - name: service
        description: The fulfillment service associated with the fulfillment.
      - name: shipment_status
        description: >
          The current shipment status of the fulfillment. Valid values include:
          - label_printed: A label for the shipment was purchased and printed.
          - label_purchased: A label for the shipment was purchased, but not printed.
          - attempted_delivery: Delivery of the shipment was attempted, but unable to be completed.
          - ready_for_pickup: The shipment is ready for pickup at a shipping depot.
          - confirmed: The carrier is aware of the shipment, but hasn't received it yet.
          - in_transit: The shipment is being transported between shipping facilities on the way to its destination.
          - out_for_delivery: The shipment is being delivered to its final destination.
          - delivered: The shipment was successfully delivered.
          - failure: Something went wrong when pulling tracking information for the shipment, such as the tracking number was invalid or the shipment was canceled.
      - name: status
        description: >
          The status of the fulfillment. Valid values include:
          - pending: Shopify has created the fulfillment and is waiting for the third-party fulfillment service to transition it to 'open' or 'success'.
          - open: The fulfillment has been acknowledged by the service and is in processing.
          - success: The fulfillment was successful.
          - cancelled: The fulfillment was cancelled.
          - error: There was an error with the fulfillment request.
          - failure: The fulfillment request failed.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the fulfillment was last modified.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__fulfillment_event
    description: >
      The FulfillmentEvent resource represents tracking events that belong to a fulfillment of one or more items in an order. 
      Fulfillment events are displayed on the order status page to update customers on the status of their shipment.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `fulfillment_event_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: address_1
        description: The street address where the fulfillment event occurred.
      - name: city
        description: The city where the fulfillment event occurred.
      - name: country
        description: The country where the fulfillment event occurred.
      - name: created_at
        description: The date and time (ISO 8601 format) when the fulfillment event was created.
      - name: estimated_delivery_at
        description: >
          The estimated delivery date based on the fulfillment's tracking number, as long as it's provided by one of the following carriers: USPS, FedEx, UPS, or Canada Post (Canada only). 
          Value is `null` if no tracking number is available or if the tracking number is from an unsupported carrier. This property is available only when carrier calculated rates are in use.
      - name: fulfillment_id
        description: An ID for the fulfillment that's associated with the fulfillment event.
      - name: happened_at
        description: The date and time (ISO 8601 format) when the fulfillment event occurred.
      - name: fulfillment_event_id
        description: An ID for the fulfillment event.
      - name: latitude
        description: A geographic coordinate specifying the latitude of the fulfillment event.
      - name: longitude
        description: A geographic coordinate specifying the longitude of the fulfillment event.
      - name: message
        description: An arbitrary message describing the status. Can be provided by a shipping carrier.
      - name: province
        description: The province where the fulfillment event occurred.
      - name: status
        description: >
          The status of the fulfillment event. Valid values:
          - label_printed: A label for the shipment was purchased and printed.
          - label_purchased: A label for the shipment was purchased, but not printed.
          - attempted_delivery: Delivery of the shipment was attempted, but unable to be completed.
          - ready_for_pickup: The shipment is ready for pickup at a shipping depot.
          - picked_up: The fulfillment was successfully picked up.
          - confirmed: The carrier is aware of the shipment, but hasn't received it yet.
          - in_transit: The shipment is being transported between shipping facilities on the way to its destination.
          - out_for_delivery: The shipment is being delivered to its final destination.
          - delivered: The shipment was successfully delivered.
          - failure: Something went wrong when pulling tracking information for the shipment, such as the tracking number was invalid or the shipment was canceled.
      - name: zip
        description: The zip code of the location where the fulfillment event occurred.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__fulfillment_order_line_item
    description: Links a fulfillment order to specific items that require fulfillment. Contains detailed product information, quantity tracking, variant metadata, and shipping requirements.
      This is a core entity for determining which products and how many units are involved in a given fulfillment process.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `fulfillment_order_line_item_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: fulfillment_order_line_item_id
        description: A globally unique identifier for this fulfillment order line item.
      - name: fulfillment_order_id
        description: The identifier of the fulfillment order that this line item is associated with.
      - name: image_alt_text
        description: Alt text describing the image associated with the line item's variant.
      - name: image_height
        description: The height in pixels of the variant image, if hosted by Shopify.
      - name: image_id
        description: The unique identifier for the variant image.
      - name: image_url
        description: The url of the variant image used in this fulfillment line item.
      - name: image_width
        description: The width in pixels of the variant image, if hosted by Shopify.
      - name: inventory_item_id
        description: The identifier of the inventory item being fulfilled.
      - name: order_line_item_id
        description: The identifier of the original order line item linked to this fulfillment.
      - name: product_title
        description: The title of the product at the time of order creation.
      - name: product_variant_id
        description: The identifier of the product variant associated with this fulfillment item.
      - name: remaining_quantity
        description: The number of units remaining to be fulfilled.
      - name: requires_shipping
        description: Indicates whether physical shipping is required for this item.
      - name: sku
        description: The SKU of the product variant.
      - name: total_quantity
        description: The total number of units allocated to this fulfillment.
      - name: variant_title
        description: The title of the product variant at the time of order creation.
      - name: vendor
        description: The vendor of the product variant.
      - name: weight_unit
        description: The unit of measurement for the weight of a single item (e.g., grams, ounces).
      - name: weight_value
        description: The numeric weight of a single unit of the line item using the specified `weight_unit`.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__fulfillment_tracking_info
    description: Represents tracking information associated with a fulfillment. Used by Shopify to generate clickable tracking numbers and delivery updates.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `fulfillment_id`, `index`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: fulfillment_id
        description: The unique identifier of the fulfillment this tracking info belongs to. 
      - name: tracking_company
        description: The name of the tracking company. For supported carriers, Shopify automatically builds tracking URLs and may update the shipment status. 
      - name: tracking_number
        description: Tracking number for the fulfillment. If a known tracking company is specified, or the number matches a known format, Shopify may auto-generate a tracking URL.
      - name: tracking_url
        description: Direct URL to track the fulfillment. This is displayed in the Shopify admin and customer notifications.
      - name: index
        description: The index of the tracking information associated with a fulfillment.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__inventory_item
    description: >
      An inventory item represents a physical good. It holds essential information about the physical good, including its SKU and whether its inventory is tracked.
      There is a 1:1 relationship between a product variant and an inventory item.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `inventory_item_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: inventory_item_id
        description: The ID of the inventory item.
        tests: 
          - not_null
      - name: is_deleted
        description: "{{ doc('_fivetran_deleted') }}"
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: country_code_of_origin
        description: The country code (ISO 3166-1 alpha-2) of where the item came from.
      - name: created_at
        description: The date and time (ISO 8601 format) when the inventory item was created.
      - name: province_code_of_origin
        description: The province code (ISO 3166-2 alpha-2) of where the item came from. The province code is only used if the shipping provider for the inventory item is Canada Post.
      - name: is_shipping_required
        description: Boolean representing whether a customer needs to provide a shipping address when placing an order containing the inventory item.
      - name: sku
        description: The unique SKU (stock keeping unit) of the inventory item.
      - name: is_inventory_quantity_tracked
        description: Boolean representing whether inventory levels are tracked for the item. If true, then the inventory quantity changes are tracked by Shopify.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the inventory item was last modified.
      - name: duplicate_sku_count
        description: The number of inventory items that share the same SKU with this item.
      - name: harmonized_system_code
        description: The harmonized system code of the item.
      - name: inventory_history_url
        description: The URL that points to the inventory history for the item.
      - name: legacy_resource_id
        description: The ID of the corresponding resource in the REST Admin API.
      - name: measurement_id
        description: The unique identifier for the inventory item's measurement.
      - name: measurement_weight_value
        description: The weight value of the inventory item's measurement.
      - name: measurement_weight_unit
        description: The unit of measurement for the inventory item's weight.
      - name: tracked_editable_reason
        description: Provides the reason why the 'tracked' field for the inventory item is locked from editing.
      - name: unit_cost_amount
        description: Decimal money amount of the unit cost associated with the inventory item.
      - name: unit_cost_currency_code
        description: Currency of the unit cost associated with the inventory item. 
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: is_tracked_editable_locked
        description: Indicates whether the 'tracked' field for the inventory item is locked from editing.

  - name: stg_shopify_gql__inventory_level
    description: >
      An inventory level represents the quantities of an inventory item for a location.
      Each inventory level belongs to one inventory item and has one location. For every location where an inventory item can be stocked, there's an inventory level that represents 
      the inventory item's quantities relating to that location.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `inventory_level_id`, `inventory_item_id`, `location_id`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: inventory_level_id
        description: A globally unique identifier for the inventory level.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: inventory_item_id
        description: The ID of the inventory item associated with the inventory level.
      - name: location_id
        description: The ID of the location that the inventory level belongs to.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the inventory level was last modified.
      - name: can_deactivate
        description: Indicates whether the inventory item can be deactivated at the location.
      - name: created_at
        description: The date and time when the inventory level was created.
      - name: deactivation_alert
        description: Provides an alert message when the inventory item is deactivated at the location.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__inventory_quantity
    description: The total quantity of the inventory item available at all locations.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `inventory_quantity_id`, `inventory_level_id`, `inventory_item_id`, `inventory_state_name`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: inventory_quantity_id
        description: The unique identifier for the record.
      - name: inventory_item_id
        description: The ID of the inventory item associated with this record.
      - name: inventory_level_id
        description: The ID of the inventory level where this item is stored.
      - name: inventory_state_name
        description: The name of the inventory state associated with the record. [Link to list of expected values](https://shopify.dev/docs/apps/build/orders-fulfillment/inventory-management-apps#inventory-states).
      - name: quantity
        description: The available quantity of the inventory item.
      - name: updated_at
        description: The timestamp of the last update to the inventory record.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__location
    description: A location represents a geographical location where your stores, pop-up stores, headquarters, and warehouses exist.   
    columns:
      - name: unique_key
        description: Surrogate key hashed on `location_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: location_id
        description: The ID of the location. 
        tests:
          - not_null
      - name: is_deleted
        description: "{{ doc('_fivetran_deleted') }}"
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: is_active
        description: >
          Boolean representing whether the location is active. If true, then the location can be used to sell products, stock inventory, and fulfill orders.
      - name: address_1
        description: The location's street address.
      - name: address_2
        description: The optional second line of the location's street address.
      - name: city
        description: The city the location is in.
      - name: country_name
        description: The country the location is in (two-letter code).
      - name: country
        description: The two-letter code (ISO 3166-1 alpha-2 format) corresponding to country the location is in, this matches the REST API.
      - name: country_code
        description: The two-letter code (ISO 3166-1 alpha-2 format) corresponding to country the location is in.
      - name: created_at
        description: The date and time (ISO 8601 format) when the location was created.
      - name: is_legacy
        description: >
          Boolean representing whether this is a fulfillment service location. If true, then the location is a fulfillment service location. 
          If false, then the location was created by the merchant and isn't tied to a fulfillment service.
      - name: phone
        description: The phone number of the location. This value can contain special characters, such as - or +.
      - name: province
        description: The province, state, or district of the location.
      - name: province_code
        description: The province, state, or district code (ISO 3166-2 alpha-2 format) of the location.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the location was last updated.
      - name: zip
        description: The zip or postal code.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: name
        description: The name of the location.

  - name: stg_shopify_gql__media
    description: Table storing media metadata, including status and timestamps.    
    columns:
      - name: unique_key
        description: Surrogate key hashed on `media_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: media_id
        description: The unique identifier for the media associated with a product image.
        tests:
          - not_null
      - name: status
        description: The status of the product image, indicating its availability or processing state.
      - name: created_at
        description: The date and time when the media was created. The API returns this value in ISO 8601 format.
      - name: updated_at
        description: The date and time when the media was last modified. The API returns this value in ISO 8601 format.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__media_image
    description: Table storing image-specific properties for media assets. 
    columns:
      - name: unique_key
        description: Surrogate key hashed on `media_id`, `image_id`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: media_id
        description: The unique identifier for the media associated with the product image.
        tests:
          - not_null
      - name: image_id
        description: Unique numeric identifier of the product image.
      - name: image_alt_text
        description: A word or phrase to share the nature or contents of an image.
      - name: image_height
        description: Height dimension of the image which is determined on upload.
      - name: image_width
        description: Width dimension of the image which is determined on upload.
      - name: image_url
        description: The URL of the product image, hashed for privacy.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__metafield
    description: >
      Metafields are a flexible way to attach additional information to a Shopify resource (e.g. Product, Collection, etc.). Some examples of data stored using metafields include specifications, size charts, 
      downloadable documents, release dates, images, or part numbers. Metafields are identified by an owner resource, a namespace, and a key and they store a value along with type information for that context. 
    columns:
      - name: unique_key
        description: Surrogate key hashed on `metafield_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: metafield_id
        description: The unique ID of the metafield.
        tests: 
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: created_at
        description: The date and time (ISO 8601 format) when the metafield was created.
      - name: description
        description: A description of the information that the metafield contains.
      - name: key
        description: The key of the metafield. Keys can be up to 64 characters long and can contain alphanumeric characters, hyphens, underscores, and periods.
      - name: namespace
        description: A container for a group of metafields. Grouping metafields within a namespace prevents your metafields from conflicting with other metafields with the same key name. Must have between 3-255 characters.
      - name: owner_resource_id
        description: The unique ID of the resource that the metafield is attached to.
      - name: owner_resource
        description: The type of resource (table) that the metafield is attached to.
      - name: value_type
        description: The type of data that the metafield stores in the `value` field. Refer to the [list](https://shopify.dev/apps/metafields/types) of supported types. Use this instead of `value_type`.
      - name: updated_at
        description: The date and time (ISO 8601 format) when the metafield was last updated.
      - name: value
        description: The data to store in the metafield. The value is always stored as a string, regardless of the metafield's type.
      - name: value_type
        description: DEPRECATED as of [June 2022](https://fivetran.com/docs/applications/shopify/changelog#june2022). Use `type` instead. 
      - name: metafield_reference
        description: Combination of the namespace and key columns. This field is key for metafield mapping in downstream models.
      - name: is_most_recent_record
        description: Boolean indicating the most up to date record identified by the most recent updated_at field.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__product_media
    description: Table mapping products to their associated media.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `product_id`, `media_id`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: product_id
        description: The id of the product associated with the media.
        tests:
          - not_null
      - name: media_id
        description: The unique identifier for the media asset linked to the product.
        tests:
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__order_adjustment 
    description: Each record represents and adjustment to and order within Shopify.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_adjustment_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: order_adjustment_id
        description: The unique numeric identifier for the order adjustment.
      - name: refund_id
        description: Reference to the refund which the adjustment is associated. 
      - name: amount_pres
        description: The amount of the order adjustment in the currency the customer purchased in.
      - name: amount_pres_currency_code
        description: The three letter currency code for the order adjustment.
      - name: amount_shop
        description: The amount of the order adjustment in the shop's currency.
      - name: amount_shop_currency_code
        description: The three letter shop currency code of the order adjustment.
      - name: reason
        description: The reason for the order adjustment.
      - name: tax_amount_pres
        description: The tax amount of the order adjustment in the currency the customer purchased in.
      - name: tax_amount_pres_currency_code
        description: The three letter currency code for the tax of the order adjustment.
      - name: tax_amount_shop
        description: The tax amount of the order adjustment in the shop's currency.
      - name: tax_amount_shop_currency_code
        description: The three letter shop currency code of the tax for the order adjustment.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: source_relation
        description: "{{ doc('source_relation') }}" 

  - name: stg_shopify_gql__order_discount_code
    description: Discount codes placed on orders.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_id`, `index`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: code
        description: This property returns the discount code that was entered at checkout. Otherwise this property returns the title of the discount that was applied.
        tests:
          - not_null
      - name: order_id
        description: Associated order ID.
        tests:
          - not_null
      - name: index
        description: Pairs with `order_id` to provide unique identifier for order discount code.     
      - name: source_relation
        description: "{{ doc('source_relation') }}" 

  - name: stg_shopify_gql__order_line_refund 
    description: Each record represents a line item refund in Shopify.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_line_refund_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: order_line_refund_id
        description: The unique identifier of the line item in the refund.
      - name: location_id
        description: The unique identifier of the location where the items will be restocked.
      - name: order_line_id
        description: The ID of the related line item in the order.
      - name: quantity
        description: The quantity of the associated line item that was returned.
      - name: refund_id
        description: The ID of the related refund.
      - name: subtotal_pres_amount
        description: The refunded subtotal amount of a line item in currency the customer paid in.
      - name: subtotal_pres_currency_code
        description: The three letter currency code for the subtotal the customer paid in.
      - name: subtotal_shop_amount
        description: The refunded subtotal amount of a line item in the currency of the shop.         
      - name: subtotal_shop_currency_code
        description: The three letter currency code for the subtotal in the currency of the shop.   
      - name: total_tax_pres_amount
        description: The total tax amount of a line item in currency the customer paid in.
      - name: total_tax_pres_currency_code
        description: The three letter currency code of the tax the customer paid in.          
      - name: total_tax_shop_amount
        description: The total tax amount of a line item in the currency of the shop.
      - name: total_tax_shop_currency_code
        description: The three letter currency code of the tax in the currency of the shop.
      - name: restock_type
        description: How this refund line item affects inventory levels.
      - name: source_relation
        description: "{{ doc('source_relation') }}" 

  - name: stg_shopify_gql__order_note_attribute
    description: Table storing custom attributes placed on orders.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_id`, `name`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: name
        description: Name of the attribute.
        tests:
          - not_null
      - name: order_id
        description: ID referencing the order the note attribute belongs to.
        tests:
          - not_null
      - name: value
        description: Value of the attribute.
      - name: source_relation
        description: "{{ doc('source_relation') }}" 

  - name: stg_shopify_gql__order_shipping_line
    description: Represents the shipping details that the customer chose for their order. 
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_shipping_line_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: order_shipping_line_id
        description: A globally-unique identifier.
        tests:
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: carrier_identifier
        description: A reference to the carrier service that provided the rate. Present when the rate was computed by a third-party carrier service.
      - name: code
        description: A reference to the shipping method.
      - name: delivery_category
        description: The general classification of the delivery method.
      - name: discounted_price_pres_amount
        description: Shipping price in customer currency after applying discounts.
      - name: discounted_price_pres_currency_code
        description: Three digit customer currency code for the discounted price.
      - name: discounted_price_shop_amount
        description: Shipping price in shop currency after applying discounts.
      - name: discounted_price_shop_currency_code
        description: Three digit shop currency code for the discounted price.
      - name: order_id
        description: ID of the associated order.
      - name: price_pres_amount
        description: The pre-tax shipping price without any discounts applied in the customer currency.
      - name: price_pres_currency_code
        description: Three digit customer currency code for the pre-tax, non-discounted price.
      - name: price_shop_amount
        description: The pre-tax shipping price without any discounts applied in the shop currency.
      - name: price_shop_currency_code
        description: Three digit customer currency code for the pre-tax, non-discounted price.           
      - name: phone
        description: The phone number at the shipping address.
      - name: source
        description: Returns the rate source for the shipping line.
      - name: title
        description: Returns the title of the shipping line.
      - name: source_relation
        description: "{{ doc('source_relation') }}" 

  - name: stg_shopify_gql__order_shipping_tax_line
    description: Represents taxes associated with order shipping lines.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_shipping_line_id`, `index`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: order_shipping_line_id
        description: ID of the order shipping line this record is associated with.
        tests:
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: index
        description: Index (from 1) representing the order of shipping lines per order.
        tests:
          - not_null
      - name: price_pres_amount
        description: The amount of tax in customer currency, after discounts and before returns. 
      - name: price_pres_currency_code
        description: The three letter currency code for the tax the customer pays. 
      - name: price_shop_amount
        description: The amount of tax in shop currency, after discounts and before returns. 
      - name: price_shop_currency_code
        description: The three letter currency code for the tax from the shop. 
      - name: rate
        description: The proportion of the line item price that the tax represents as a decimal.
      - name: title
        description: The name of the tax.
      - name: source_relation
        description: "{{ doc('source_relation') }}" 

  - name: stg_shopify_gql__order_tag
    description: Tags that the shop owner has attached to the order.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_id`, `index`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: order_id
        description: ID of the order being tagged.
        tests:
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: index
        description: Index (starting from 1) representing when the tag was placed on the order. 
        tests:
          - not_null
      - name: value
        description: Value of the tag.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__product
    description: Each record represents a product in Shopify.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `product_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: is_deleted
        description: Whether the record has been deleted in the source system.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: created_timestamp
        description: The date and time when the product was created.
      - name: handle
        description: A unique human-friendly string for the product. Automatically generated from the product's title.
      - name: product_id
        description: An unsigned 64-bit integer that's used as a unique identifier for the product. Each id is unique across the Shopify system. No two products will have the same id, even if they're from different shops.
      - name: product_type
        description: A categorization for the product used for filtering and searching products.
      - name: published_timestamp
        description: The date and time (ISO 8601 format) when the product was published. Can be set to null to unpublish the product from the Online Store channel.
      - name: title
        description: The name of the product.
      - name: updated_timestamp
        description: The date and time when the product was last modified.
      - name: vendor
        description: The name of the product's vendor.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: status
        description: >
          The status of the product. Valid values:
          - active: The product is ready to sell and is available to customers on the online store, sales channels, and apps. By default, existing products are set to active.
          - archived: The product is no longer being sold and isn't available to customers on sales channels and apps.
          - draft: The product isn't ready to sell and is unavailable to customers on sales channels and apps. By default, duplicated and unarchived products are set to draft.

  - name: stg_shopify_gql__product_variant
    description: Each record represents a product variant in Shopify.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `variant_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: barcode
        description: The barcode, UPC, or ISBN number for the product.
      - name: compare_at_price
        description: The original price of the item before an adjustment or a sale in shop currency
      - name: created_timestamp
        description: The date and time (ISO 8601 format) when the product variant was created.
      - name: variant_id
        description: The unique numeric identifier for the product variant.
      - name: inventory_item_id
        description: The unique identifier for the inventory item, which is used in the Inventory API to query for inventory information.
      - name: inventory_policy
        description: Whether customers are allowed to place an order for the product variant when it's out of stock.
      - name: inventory_quantity
        description: An aggregate of inventory across all locations. To adjust inventory at a specific location, use the InventoryLevel resource.  
      - name: position
        description: The order of the product variant in the list of product variants. The first position in the list is 1. The position of variants is indicated by the order in which they are listed.
      - name: price
        description: The price of the product variant.
      - name: product_id
        description: The unique numeric identifier for the product.
      - name: sku
        description: A unique identifier for the product variant in the shop. Required in order to connect to a FulfillmentService.
      - name: is_taxable
        description: Whether a tax is charged when the product variant is sold.
      - name: tax_code
        description: This parameter applies only to the stores that have the Avalara AvaTax app installed. Specifies the Avalara tax code for the product variant.
      - name: title
        description: The title of the product variant. The title field is a concatenation of the option1, option2, and option3 fields. You can only update title indirectly using the option fields.
      - name: updated_timestamp
        description: The date and time when the product variant was last modified. Gets returned in ISO 8601 format.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: is_available_for_sale
        description: Indicates whether the product variant is available for sale.
      - name: display_name
        description: The display name of the variant, based on the product's title and variant's title. 
      - name: legacy_resource_id
        description: The ID of the corresponding resource in the REST Admin API. 
      - name: has_components_required
        description: Indicates whether a product variant requires components. 
      - name: sellable_online_quantity
        description: The total sellable quantity of the variant for online channels. 
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__product_variant_media
    description: Table mapping products to their associated media.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `product_variant_id`, `media_id`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: product_variant_id
        description: The id of the product variant associated with the media.
        tests:
          - not_null
      - name: media_id
        description: The unique identifier for the media asset linked to the product.
        tests:
          - not_null
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__product_tag
    description: Tags that the shop owner has attached to the product.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `product_id`, `index`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: index
        description: Index (starting from 1) representing when the tag was placed on the product. 
        tests:
          - not_null
      - name: product_id
        description: ID of the product being tagged.
        tests:
          - not_null
      - name: value
        description: Value of the tag.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__refund
    description: Each record represents a refund within Shopify.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `refund_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: refund_id
        description: The unique numeric identifier for the refund.
      - name: created_at
        description: Timestamp of the date when the refund was created.
      - name: note
        description: User generated note attached to the refund.
      - name: user_id
        description: Reference to the user id which generated the refund.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: order_id
        description: Reference to the order which the refund is associated.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: return_id
        description: Reference to the return which the refund is associated.
      - name: total_refunded_pres_amount
        description: The total amount across all transactions for the refund in the customer currency.
      - name: total_refunded_pres_currency_code
        description: The three letter currency code for the refund in the customer currency.
      - name: total_refunded_shop_amount
        description:  The total amount across all transactions for the refund in the shop currency.
      - name: total_refunded_shop_currency_code
        description: The three letter currency code for the refund in the shop currency.

  - name: stg_shopify_gql__shop
    description: The Shop resource is a collection of general business and store management settings and information about the store.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `shop_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: is_deleted
        description: "{{ doc('_fivetran_deleted') }}"
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: address_1
        description: The shop's street address.
      - name: address_2
        description: The optional second line of the shop's street address.
      - name: has_checkout_api_supported
        description: Boolean representing whether the shop is capable of accepting payments directly through the Checkout API.
      - name: city
        description: The shop's city. 
      - name: country
        description: The shop's country. In most cases, this value matches the country_code.
      - name: country_code
        description: The two-letter country code corresponding to the shop's country.
      - name: country_name
        description: The shop's normalized country name.
      - name: created_at
        description: The date and time (ISO 8601) when the shop was created.
      - name: currency
        description: The three-letter code (ISO 4217 format) for the shop's default currency.
      - name: customer_email
        description: The contact email used for communication between the shop owner and the customer.
      - name: domain
        description: The shop's domain.
      - name: email
        description: The contact email used for communication between Shopify and the shop owner.
      - name: enabled_presentment_currencies
        description: An array of of enabled currencies (ISO 4217 format) that the shop accepts. Merchants can enable currencies from their Shopify Payments settings in the Shopify Admin.
      - name: has_storefront
        description: Boolean representing whether this shop has an online store.
      - name: iana_timezone
        description: The name of the timezone assigned by the [IANA](https://www.iana.org/time-zones).
      - name: shop_id
        description: The ID for the shop. A 64-bit unsigned integer.
        tests:
          - not_null
      - name: latitude
        description: The latitude of the shop's location.
      - name: longitude
        description: The longitude of the shop's location.
      - name: money_format
        description: A string representing the way currency is formatted when the currency isn't specified.
      - name: money_in_emails_format
        description: A string representing the way currency is formatted in email notifications when the currency isn't specified.
      - name: money_with_currency_format
        description: A string representing the way currency is formatted when the currency is specified.
      - name: money_with_currency_in_emails_format
        description: A string representing the way currency is formatted in email notifications when the currency is specified.
      - name: myshopify_domain
        description: The shop's .myshopify.com domain.
      - name: name
        description: The name of the shop.
      - name: is_password_enabled
        description: Boolean representing whether the password protection page is enabled on the shop's online store.
      - name: phone
        description: The contact phone number for the shop.
      - name: plan_display_name
        description: The display name of the Shopify plan the shop is on.
      - name: primary_locale
        description: The shop's primary locale, as configured in the language settings of the shop's theme.
      - name: province
        description: The shop's normalized province or state name.
      - name: province_code
        description: The two- or three-letter code for the shop's province or state.
      - name: is_setup_required
        description: Boolean representing whether the shop has any outstanding setup steps.
      - name: shop_owner
        description: The username of the shop owner.
      - name: has_shipping_taxes
        description: Boolean representing whether taxes are charged for shipping. Valid values are true or false.
      - name: has_taxes_included_in_price
        description: Boolean representing whether applicable taxes are included in product prices. Valid values are true or null.
      - name: timezone_abbreviation
        description: The shop's time zone abbreviation.
      - name: timezone_offset
        description: The shop's time zone offset.
      - name: timezone_offset_minutes
        description: The shop's time zone offset expressed as a number of minutes.
      - name: updated_at
        description: The date and time (ISO 8601) when the shop was last updated.
      - name: weight_unit
        description: The default unit of weight measurement for the shop.
      - name: zip
        description: The shop's zip or postal code.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
  
  - name: stg_shopify_gql__tax_line
    description: Represents a single tax applied to the associated line item.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `order_line_id`, `index`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: index
        description: The index of the tax line.
      - name: order_line_id
        description: The order line that this tax line is associated with.
      - name: rate
        description: The proportion of the line item price that the tax represents as a decimal.
      - name: title
        description: The name of the tax.
      - name: price_pres_amount
        description: The amount of tax in customer currency after discounts and before returns.
      - name: price_pres_currency_code
        description: The three letter currency code for the tax the customer pays.
      - name: price_shop_amount
        description: The amount of tax in shop currency after discounts and before returns.
      - name: price_shop_currency_code
        description: The three letter currency code for the tax from the shop.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__tender_transaction
    description: >
      Each tender transaction represents money passing between the merchant and a customer. A tender transaction with a positive amount 
      represents a transaction where the customer paid money to the merchant. A negative amount represents a transaction where the 
      merchant refunded money back to the customer. Tender transactions represent transactions that modify the shop's balance.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `transaction_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: amount
        description: The amount of the tender transaction in the shop's currency.
      - name: currency
        description: The three-letter code (ISO 4217 format) for the currency used for the tender transaction.
      - name: transaction_id
        description: The ID of the transaction.
        tests:
          - not_null
      - name: order_id
        description: The ID of the order that the tender transaction belongs to.
      - name: payment_method
        description: >
          Information about the payment method used for this transaction. Valid values include:
          - credit_card
          - cash
          - android_pay
          - apple_pay
          - google_pay
          - samsung_pay
          - shopify_pay
          - amazon
          - klarna
          - paypal
          - unknown
          - other
      - name: processed_at
        description: The date and time (ISO 8601 format) when the tender transaction was processed.
      - name: remote_reference
        description: The remote (gateway) reference associated with the tender.
      - name: user_id
        description: The ID of the user logged into the Shopify POS device that processed the tender transaction, if applicable.
      - name: source_relation
        description: "{{ doc('source_relation') }}"
        
  - name: stg_shopify_gql__transaction
    description: Each record represents a transaction in Shopify.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `transaction_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: transaction_id
        description: The ID for the transaction.
      - name: order_id
        description: The ID for the order that the transaction is associated with.
      - name: refund_id
        description: The ID associated with a refund in the refund table.
      - name: amount_pres
        description: The amount of the transaction in the customer currency.  
      - name: amount_pres_currency_code
        description: The three letter currency code of the customer currency. 
      - name: amount_shop
        description: The amount of the transaction in the shop currency.
      - name: amount_shop_currency_code
        description: The three letter currency code of the shop's transaction currency. 
      - name: authorization_code
        description: The authorization code associated with the transaction.
      - name: created_timestamp
        description: The date and time when the transaction was created.
      - name: processed_timestamp
        description: The date and time when a transaction was processed.
      - name: gateway
        description: The name of the gateway the transaction was issued through.
      - name: parent_id
        description: The ID of an associated transaction.
      - name: payment_avs_result_code
        description: The response code from the address verification system.
      - name: payment_credit_card_bin
        description: The issuer identification number (IIN), formerly known as bank identification number (BIN) of the customer's credit card.
      - name: payment_cvv_result_code
        description: The response code from the credit card company indicating whether the customer entered the card security code, or card verification value, correctly.
      - name: payment_credit_card_number
        description: The customer's credit card number, with most of the leading digits redacted.
      - name: payment_credit_card_company
        description: The name of the company that issued the customer's credit card.
      - name: kind
        description: The transaction's type.
      - name: receipt
        description: A transaction receipt attached to the transaction by the gateway. 
      - name: error_code
        description: A standardized error code, independent of the payment provider.
      - name: status
        description: The status of the transaction.
      - name: user_id
        description: The ID for the user who was logged into the Shopify POS device when the order was processed, if applicable.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: source_relation
        description: "{{ doc('source_relation') }}"
      - name: authorization_expires_at
        description: The date and time (ISO 8601 format) when the Shopify Payments authorization expires.
      - name: device_id
        description: The ID for the device.
      - name: currency_exchange_id
        description: The ID of the adjustment.
      - name: currency_exchange_adjustment
        description: The difference between the amounts on the associated transaction and the parent transaction.
      - name: currency_exchange_original_amount
        description: The amount of the parent transaction in the shop currency.
      - name: currency_exchange_final_amount
        description: The amount of the associated transaction in the shop currency.
      - name: currency_exchange_currency
        description: The shop currency.

  - name: stg_shopify_gql__customer_visit
    description: Metadata about a customer's session visiting a Shopify store, including session, landing page, referrer, marketing campaign, and source attribution information.
      This data helps merchants analyze the effectiveness of marketing campaigns and customer engagement. 
    columns:
      - name: unique_key
        description: Surrogate key hashed on `customer_visit_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: customer_visit_id
        description: A globally-unique identifier for the customer visit session.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: order_id
        description: The ID of the order associated with the customer visit, if any.
      - name: type
        description: >
          The type of marketing tactic associated with the session. 
          Possible values include: abandoned_cart, ad, affiliate, link, loyalty, message, newsletter, notification, post, retargeting, seo, storefront_app, transactional.
      - name: landing_page
        description: The URL of the first page the customer landed on for the session.
      - name: landing_page_html
        description: The landing page URL rendered as HTML with a hyperlink.
      - name: occurred_at
        description: The timestamp when the customer's session occurred.
      - name: referral_code
        description: A marketing referral code captured from the landing URL. Supports query params like `ref`, `source`, or `r`.
      - name: referral_info_html
        description: Referral info rendered as HTML with URLs.
      - name: referring_site
        description: The referring webpage where the customer clicked a link to arrive at the store.
      - name: source
        description: The origin of the customer's visit, such as a platform (e.g., Facebook, Google), a QR code, direct, or other attribution channels.
      - name: source_description
        description: A more descriptive label for the visit source; used primarily for the first or last session.
      - name: source_type
        description: The marketing tactic type, such as ad, seo, newsletter, etc.
      - name: utm_parameters_campaign
        description: The name of the marketing campaign.
      - name: utm_parameters_content
        description: Identifies specific content within a campaign, used to differentiate similar links.
      - name: utm_parameters_medium
        description: The medium of the campaign (e.g., cpc, banner, email).
      - name: utm_parameters_source
        description: The traffic source for the campaign (e.g., google, newsletter).
      - name: utm_parameters_term
        description: Search terms associated with paid campaigns.
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__collection_rule
    description: >
      Defines the rules used to automatically include products in a smart collection.
      Each rule specifies a product attribute, a comparison relation, and a condition value to match against.
      These rules are evaluated dynamically to determine collection membership without manual curation.
    columns:
      - name: unique_key
        description: Surrogate key hashed on `collection_id`, `index`, and `source_relation`.
        tests:
          - unique
          - not_null
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: collection_id
        description: The ID of the smart collection to which this rule applies.
      - name: index
        description: >
          The position of the rule within the collection's rule set. 
          Rules are evaluated in order and may be grouped depending on collection logic.
      - name: condition
        description: >
          The value to compare against the attribute. For example, “Hats” if the rule is targeting products with a title containing “Hats”.
          The interpretation depends on the associated `relation` and `columns` values.
      - name: relation
        description: >
          The operator used to evaluate the rule. Common values include:
          - `equals`
          - `contains`
          - `not_equals`
          - `starts_with`
          - `ends_with`
          - `is_set`
          - `is_not_set`
          - `greater_than`
          - `less_than`
          - `not_contains`
      - name: columns
        description: >
          The attribute being evaluated by the rule. Example values include:
          - `title`
          - `vendor`
          - `tag`
          - `variant_price`
          - `product_category_id`
          - `variant_compare_at_price`
          - `variant_metafield_definition`
          - `product_metafield_definition`
          - `variant_weight`
          - `type`
          - `is_price_reduced`
      - name: source_relation
        description: "{{ doc('source_relation') }}"

  - name: stg_shopify_gql__customer_address
    description: Represents a customer's mailing address and includes additional geographic metadata.   
    columns:
      - name: unique_key
        description: Surrogate key hashed on `customer_address_id` and `source_relation`.
        tests:
          - unique
          - not_null
      - name: customer_address_id
        description: A globally unique identifier for the customer address.
      - name: _fivetran_synced
        description: "{{ doc('_fivetran_synced') }}"
      - name: customer_id
        description: The unique identifier of the customer to whom this address belongs.
      - name: address_1
        description: The first line of the address (e.g., street address or PO Box).
      - name: address_2
        description: The second line of the address (e.g., apartment, suite, or unit).
      - name: city
        description: The name of the city, district, village, or town for the address.
      - name: company
        description: The company or organization associated with the customer at this address.
      - name: country
        description: The full country name for the address.
      - name: country_code
        description: The two-letter ISO country code for the address.
      - name: first_name
        description: The customer's first name for this address.
      - name: is_default
        description: Indicates if this address is the default shipping address for the customer.
      - name: last_name
        description: The customer's last name for this address.
      - name: latitude
        description: The latitude coordinate of the address location.
      - name: longitude
        description: The longitude coordinate of the address location.
      - name: name
        description: The full name of the customer, derived from first and last name.
      - name: phone
        description: The customer’s phone number.
      - name: province
        description: The name of the region, state, or province for the address.
      - name: province_code
        description: The standardized zone or province code for the region.
      - name: zip
        description: The zip or postal code of the address.
      - name: validation_result_summary
        description: A summary of address validation results (e.g., match confidence or status).
      - name: timezone
        description: The timezone associated with the address, if available.
      - name: has_coordinates_validated
        description: Indicates whether the latitude and longitude coordinates were validated.
      - name: source_relation
        description: "{{ doc('source_relation') }}"